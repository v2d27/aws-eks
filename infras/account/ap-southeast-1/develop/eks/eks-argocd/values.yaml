global:
  domain: ${argocd_domain}
  nodeSelector:
    eks.amazonaws.com/capacityType: ON_DEMAND

configs:
  params:
    server.insecure: true
  cm:
    accounts.terraform-admin: apiKey,login
    accounts.terraform-admin.enabled: "true"
  secret:
    argocdServerAdminPassword: ${argocd_admin_password}
  rbac:
    policy.csv: |
      p, role:api_admin, applications, *, */*, allow
      p, role:api_admin, clusters, *, *, allow
      p, role:api_admin, repositories, *, *, allow
      p, role:api_admin, projects, *, *, allow
      p, role:api_admin, accounts, *, *, allow
      p, role:api_admin, certificates, *, *, allow
      p, role:api_admin, gpgkeys, *, *, allow
      g, terraform-admin, role:api_admin

server:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      nginx.ingress.kubernetes.io/rewrite-target: /
      nginx.ingress.kubernetes.io/enable-cors: "true"
      nginx.ingress.kubernetes.io/cors-allow-origin: "*"

redis: {}

dex:
  enabled: true
